## 字符串笔记

Java中用来存储一个**字符串对象**总共有三种实现方式，分别是`String`类，`StringBuffer`类和`StringBuilder`类，每种方法都有其优缺点和适用场景。如果单纯说存储一个字符串，可以把它看作一个字符数组，那么还可以用`char`数组来实现。
#### `String`和`char`的区别
1. 类型不同：char是字符类型，String是字符串类型
   对于这个问题，首先来看一下Java的基本数据类型。Java中总共有两个基本数据类型，**基本数据类型**(Primitive data type)和**引用数据类型**(non-primitive data type)

   * 基本数据类型：byte(1), short(2), int(4), long(8), float(4), double(8), boolean, char(2).

   * 引用数据类型：array, class, interface.
     首先`char`属于**基本数据类型**，而`String`属于引用数据类型中的`Class`,其位于`java.lang.String`。`String`类可以调用方法，具有面向对象的特征。
2. String字符串用`'' ''`来包含**串**，而char用`''`来包含**单字符**。
3. `String`与`char数组`的转换。
   * 使用`String.toCharArray()`转`char数组`

   ```java
   String str = "abc";
   char nums[] = str.toCharArray();
   char s = str.charAt(0); //可以使用charAt()获取单个字符
   ```

   * 使用`String.valueOf()`转`String`

   ```java
   char nums[] = {'a','b','c'};
   String str = String.valueOf(nums);
   ```
### `String`类

#### 创建字符串

Java提供了两种方法来生成一个新的字符串对象。

```java
String str1 = "hello";					 //使用双引号/字面量 直接创建
String str2 = new String("hello");		 //通过new关键字创建
```

下面我们来看一下JVM是如何处理新生成字符串的。

首先我们先来讲述一下字符串常量池的概念。

> - 常量池是Java中的一种技术，八种基础数据类型除了float和double都实现了常量池技术. 这项技术从字面上是很好理解的: 把经常用到的数据存放在某块内存中, 避免频繁的数据创建与销毁, 实现数据共享, 提高系统性能。简单来说，可以理解为一种对于**常用数据的cache**。
> - 字符串常量池在每个VM中只有一份，**存放**的是字符串常量的**引用值**。具体的实例对象是在堆中开辟的一块空间存放的。
> - 字符串常量池——string pool，也叫做string literal pool。
> - 在JDK1.7以后，字符串常量池被放到了**堆**中。
> - 字符串常量池是全局共享的。

下面我们用一段代码来展示整个过程。

```java
String s1 = "hello";
String s2 = new String("hello");
System.out.println(s1 == s2);   //false
String s3 = "hello";
System.out.println(s1 == s3);   //true
```

- 使用双引号`" "`即字面量方法创建一个字符串。

  > VM会首先到字符串常量池中查找该字符串是否存在：
  >
  > **存在**则**返回**其**引用**；
  >
  > **不存在**则会在堆上**创建**该字符串**对象**，然后在字符串常量池中**注册**该字符串，然后**返回**注册过的**引用**。

  以```String s1 = "hello";```举例。

  <img src="./img/String1.JPG" style="zoom:70%;"/>


- 使用**new**关键字创建字符串。

#### 字符串不可变性

1. 在Java中，String对象被创建后则**不能被修改**，**任何的修改操作都会生成新的对象**。
2. JVM使用**字符串常量池**来存储所有的字符串常量。在JDK1.8及以后，字符串常量池被放在了Java堆内存中。

#### 常用方法



#### 与基本数据类型的转化

- 转字符串

  ```java
  int a = 2;
  //1.用String.valueOf()转换
  String str1 = String.valueOf(a);
  //2.用 + ""转换
  String str2 = a + "";
  //3.对应包装类的toString()方法
  String str3 = Integer.toString(a);
  ```

- 转基本数据类型

  ```java
  String str = "2";
  //对应包装类的parsexxx()方法
  int a = Integer.parseInt(str);
  ```

### `StringBuffer`类



### `StringBuilder`类



## 总结

1. String效率最低，对于内存的浪费








