### 动态规划笔记

#### 概念

动态规划的本质是：把大问题分解成小问题，再根据子问题的解得出原问题的解。

几乎所有的算法都是大问题分解成小问题，**决定该问题是否能用动态规划解决的是这些”小问题“会不会被被重复调用。**

动态规划实际上最关键的性质是**记住并复用这些子问题的解**，即用数组存下子问题的解，在后面的计算中直接获取子问题的解。

#### 怎么做

动态规划的本质就是：从一个状态如何递推转移到另一个状态。在其中最重要的两点：**递推关系**和**边界条件**。

- **边界条件**：

  很好理解，其实就是初始值，具体的初始值还是要看题目的dp方程如何定义才能确定。

- **递推关系**：

  递推关系是最核心也是最难的地方，可以理解为我们常说的动态转移方程。

  拿到一个具体的题目，其实一般都很难一下子找到动态转移方程。关键在于将题目抽象成一个数学问题，然后对这个数学问题进行建模。

  > 这个过程其实很像小时候根据题目建立方程，然后解方程哈哈。回忆一下，会发现解方程第一步就是确定变量，然后建立方程，解方程。

  - 根据题目条件确定变量

    这里的变量就是状态转移方程**f(i, j...)**中的**i或者j**。大部分dp题都是两个变量，对应二维dp数组。

    ```java
    122. 买卖股票的最佳时机 II
        变量就是天数，和 每天之后手上有没有股票
    123. 买卖股票的最佳时机 III
        变量就是天数，和 每天之后的状态，但由于限制了两次交易，所以状态变成：0. 没股票 且 没买过
                                                                 1. 有股票 且 买过一次
                                                                 2. 没股票 且 卖过一次
                                                                 3. 有股票 且 买过两次
                                                                 4. 没股票 且 卖过两次
    
    ```

  - 构建f(i,j)的含义

    f(i,j)的含义很难一下找到，一般而言，往最终题目的解上面去靠可以思考出来。

    ```java
    122. 买卖股票的最佳时机 II
         f(i,j): 第i天之后手上的现金. j取值0和1，分别代表当天结束之后没有和有股票
    123. 买卖股票的最佳时机 III
         f(i,j): 第i天之后手上的现金. j取值0，1，2，3，4分别代表上面所述状态
    ```

  - 确定dp方程

    根据前面确定的f(i,j)含义，去思考一个状态到另一个状态是如何转移的。

    ```java
    122. 买卖股票的最佳时机 II
    	f(i,0) = MAX { f(i-1,0), f(i-1,1)+[i] } 对应为前一天没股票, 前一天有股票但今天卖了
    	f(i,1) = MAX { f(i-1,1), f(i-1,0)-[i] } 对应为前一天有股票, 前一天没股票但今天买了 
    123. 买卖股票的最佳时机 III
        f(i,0) = f(i-1,0)
        f(i,1) = MAX{f(i-1,1), f(i-1,0) - prices[i]} 没动 或 当天买入
        f(i,2) = MAX{f(i-1,2), f(i-1,1) + prices[i]} 没动 或 当天卖出
        f(i,3) = MAX{f(i-1,3), f(i-1,2) - prices[i]} 没动 或 当天买入
        f(i,4) = MAX{f(i-1,4), f(i-1,3) + prices[i]} 没动 或 当天卖出
    ```

  总结一下：第一步先确定有哪些变量（大部分题目对应两个），之后根据变量构建出状态f(i,j)，根据题目去写出状态转移式。

